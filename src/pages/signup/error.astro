---
import Head from '../../layouts/head.astro';
import Header from '../../layouts/header.astro';
import Footer from '../../layouts/footer.astro';

import '../../styles/global.css';
import '../../styles/base.css';
import '../../styles/normalise.css';

const code = Astro.url.searchParams.get("code");

const messages: Record<string, string> = {
  email_required: "Email is required.",
  invalid_email: "The email address is invalid.",
  name_too_long: "Name is too long.",
  message_too_long: "Message exceeds the allowed length.",
  no_interest: "Select at least one interest.",
  brevo_failed: "Unable to process signup. Try again later.",
  server_error: "An unexpected error occurred.",
};

const message = messages[code ?? ""] ?? "Something went wrong.";
---
<html lang="en">

<Head
  title="tstfie | Sign up"
   description="Sign up for the newsletter."
   canonical="https://www.tstfie.ch/signup"
/>
<body>
  <container class="padding">
    <Header>
      <a href="/?projects=open" class="navigation view-projects">View projects</a>
      <a href="../" onclick="event.preventDefault(); history.back();" class="navigation">Back</a>
    </Header>
    <section class="window contact">
        <h1>Sign up</h1>
        <p>Receive updates</p>
      <section class="contact-section">
        <h3>Something went wrong.</h3>
        <p>{message}</p>
        <a href="/signup" class="cta primary"><h4>Try again</h4></a>
      </section>
    <div>
    </div>
    </section>
    <Footer/>
  </container>
</body>
</html>